<style type="text/css">
#stageview {
	border-spacing:0;
    border-collapse:collapse;
}
#stageview td{
	border:1px solid black;
}
#stageview th{
	border:1px solid black;
}
#stagesviewquicktbl {
	border:0px;width:100%;
}

#stagesviewquicktbl td {
	cell-padding:0px;
	padding:0px;
	margin:0px;
}

#stagesviewquicktbl button {
	width:100%;
	height:100%;
	padding:0px;
	margin:0px;
	color:#eee;
	margin-bottom:10px;
}
</style>

<button id="stageViewBackButton" ng-Click="gotoStages()">&lt; {{flow.name}}</button>
<br />
<table id="stagesviewquicktbl">
<tr>
	<td ng-repeat="stage in stages"><button style="height:{{stageBoxHeight}}px; background-color:{{stage.stageColour}}" ng-Click="viewStage(stage.stageId)"><span style="font-size:2em;">{{stage.count}}</span><br/>{{stage.stageName}}</button></td>
</tr>
</table>
<br />

<table id="stageview" width="100%">
<tr><th>Stage</th>
<th ng-Repeat="field in fields | filter:{display:'yes'}">
{{field.fieldName}}
</th></tr>



<tr ng-Repeat="client in crm | filter:{stageId : selectedStageId}">
<td>
<select ng-Model="client.stageId">
<option ng-Repeat="stage in stages" value="{{stage.stageId}}" ng-Selected="client.stageId == stage.stageId">{{stage.stageName}}</option>
</select>
</td>
<td ng-Repeat="field in client.fields | indexInSet:visibleFieldIndexes" ng-Click="openBox(client.id)">{{field}}</td>
</tr>
</table>
<hr />
<form name="newBoxForm">
<strong>New...</strong>
<div ng-Repeat="field in fields">
<label>{{field.fieldName}}</label>
<input type="{{field.fieldType}}" ng-Model="newFields[$index]">
</div>
<button ng-Click="addClient()">Add</button>
</form>